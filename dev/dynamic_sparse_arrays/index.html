<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Dynamic Sparse Arrays · Coluna.jl</title><meta name="title" content="Dynamic Sparse Arrays · Coluna.jl"/><meta property="og:title" content="Dynamic Sparse Arrays · Coluna.jl"/><meta property="twitter:title" content="Dynamic Sparse Arrays · Coluna.jl"/><meta name="description" content="Documentation for Coluna.jl."/><meta property="og:description" content="Documentation for Coluna.jl."/><meta property="twitter:description" content="Documentation for Coluna.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><script src="../assets/js/init.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Coluna.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><span class="tocitem">Tutorials</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Getting Started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../start/start/">Column generation</a></li><li><a class="tocitem" href="../start/cuts/">Cut Generation</a></li><li><a class="tocitem" href="../start/pricing/">Pricing callback</a></li><li><a class="tocitem" href="../start/identical_sp/">Identical subproblems</a></li><li><a class="tocitem" href="../start/custom_data/">Custom data</a></li><li><a class="tocitem" href="../start/initial_columns/">Initial columns callback</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Advanced tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../start/advanced_demo/">Column Generation and Benders on Location Routing</a></li><li><a class="tocitem" href="../start/other_pbs/">Other classic problems</a></li></ul></li></ul></li><li><span class="tocitem">Manual</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Decomposition</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../man/decomposition/">Decomposition paradigms</a></li><li><a class="tocitem" href="../man/blockdecomposition/">Setup decomposition using BlockDecomposition</a></li></ul></li><li><a class="tocitem" href="../man/config/">Configuration</a></li><li><a class="tocitem" href="../man/algorithm/">Built-in algorithms</a></li><li><a class="tocitem" href="../man/callbacks/">User-defined Callbacks</a></li><li><a class="tocitem" href="../man/presolve/">Presolve algorithm</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../api/algos/">Algorithms</a></li><li><a class="tocitem" href="../api/benders/">Benders</a></li><li><a class="tocitem" href="../api/branching/">Branching</a></li><li><a class="tocitem" href="../api/colgen/">ColGen</a></li><li><a class="tocitem" href="../api/presolve/">Presolve</a></li><li><a class="tocitem" href="../api/treesearch/">TreeSearch</a></li><li><a class="tocitem" href="../api/storage/">Storage</a></li></ul></li><li class="is-active"><a class="tocitem" href>Dynamic Sparse Arrays</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#References"><span>References</span></a></li></ul></li><li><a class="tocitem" href="../qa/">Q&amp;A</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Dynamic Sparse Arrays</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Dynamic Sparse Arrays</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/atoptima/Coluna.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/atoptima/Coluna.jl/blob/master/docs/src/dynamic_sparse_arrays.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Dynamic-Sparse-Arrays"><a class="docs-heading-anchor" href="#Dynamic-Sparse-Arrays">Dynamic Sparse Arrays</a><a id="Dynamic-Sparse-Arrays-1"></a><a class="docs-heading-anchor-permalink" href="#Dynamic-Sparse-Arrays" title="Permalink"></a></h1><p>This package aims to provide dynamic sparse vectors and matrices in Julia.  Unlike the sparse arrays provided in <code>SparseArrays</code>, arrays from this package have unfixed sizes.  It means that we can add or delete rows and columns after the instantiation of the array.</p><p><code>DynamicSparseArrays</code> is a registered package.</p><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>Coluna is a branch-cut-and-price framework. It means that Coluna&#39;s algorithms dynamically generate constraints and variables. Therefore, the coefficient matrix (which is usually sparse) must support the addition of new rows and columns.</p><p>For this purpose, we implemented the packed-memory array data structure to handle the dynamic sparse vector introduced in the following papers:</p><blockquote><p>BENDER, Michael A. et HU, Haodong. An adaptive packed-memory array. ACM Transactions on Database Systems (TODS), 2007, vol. 32, no 4, p. 26.</p></blockquote><blockquote><p>BENDER, Michael A., DEMAINE, Erik D., et FARACH-COLTON, Martin. Cache-oblivious B-trees. SIAM Journal on Computing, 2005, vol. 35, no 2, p. 341-358.</p></blockquote><p>On top of the packed-memory array, we implemented the data structure introduced in the following paper to handle the dynamic sparse matrix.</p><blockquote><p>WHEATMAN, Brian et XU, Helen. Packed Compressed Sparse Row: A Dynamic Graph Representation. In : 2018 IEEE High Performance extreme Computing Conference (HPEC). IEEE, 2018. p. 1-7.</p></blockquote><p>The implementation may vary from the description in the papers. If you find some enhancements, please contact <a href="https://github.com/guimarqu">guimarqu</a>.</p><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>The packed-memory array (<code>PackedMemoryArray{K,T}</code>) is a <code>Vector{Union{Nothing,Tuple{K,T}}}</code> where <code>K</code> is the type of the keys and <code>T</code> is the type of the values. We keep empty entries (i.e. <code>Nothing</code>) in the array to add new values later fast. Non-empty entries are sorted by ascending key order. The array is virtually split into segments of equal size. The goal is to maintain the density (i.e. number of non-empty values/size of the segment) of each segment between pre-defined bounds. We also consider the density of certain unions of segments represented by nodes of the tree in gray. The root node of the tree is the union of all segments, thus the whole array. When one node of the tree has a density outside the allowed bounds, we need to rebalance the parent. It means that we redistribute the empty and non-empty entries to fit the density bounds. If the density bounds are not respected at the root node, we resize the array.</p><p>On top of the packed-memory array, there is the (<code>PackedCSC{K,T}</code>).  This is a particular case of a matrix where values are of type <code>T</code>, row keys of type <code>K</code>, and column keys of type <code>Int</code>. Each column of the matrix (partition) is delimited by a semaphore which is a non-empty entry with a reserved key value defined by the <code>semaphore_key</code> function. In the example, the first partition has its semaphore at position 1, starts at position 2, and finishes at position 9.  At position 10, it&#39;s the semaphore that signals the beginning of the second partition. In each partition, non-empty entries are sorted by ascending key order.</p><p>As you can see, the <code>PackedCSC{K,T}</code> is not well suited to the matrix. Indeed, each column is associated with a partition. If you have a column with only zero values, the array will contain a partition with only empty entries. Lastly, the type of column key is <code>Int</code>. Therefore, built on top of <code>PackedCSC{K,T}</code>, <code>MappedCSC{K,L,T}</code> corrects all these shortcomings. This data structure just associates a column key of type <code>L</code> to each partition of <code>PackedCSC{K,T}</code>.</p><div style="width:75%; margin-left:auto; margin-right:auto"><p><img src="../assets/img/dynamic_sparse_arrays.svg" alt="Dynamic Sparse Arrays"/></p><p style="text-align: center;">Architecture overview.</p>
</div><h2 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DynamicSparseArrays.dynamicsparsevec" href="#DynamicSparseArrays.dynamicsparsevec"><code>DynamicSparseArrays.dynamicsparsevec</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dynamicsparsevec(I, V, [combine, n])</code></pre><p>Creates a dynamic sparse vector <code>S</code> of length <code>n</code> such that <code>S[I[k]] = S[V[k]]</code>. The combine operator is used to combine the values of <code>V</code> that have same id in <code>I</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/atoptima/DynamicSparseArrays.jl/blob/v0.7.2/src/vector.jl#L56-L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DynamicSparseArrays.dynamicsparse" href="#DynamicSparseArrays.dynamicsparse"><code>DynamicSparseArrays.dynamicsparse</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dynamicsparse(I, J, V, [m, n])</code></pre><p>Creates a dynamic sparse matrix <code>S</code> of dimensions <code>m</code>×<code>n</code> such that <code>S[I[k], J[k]] = V[k]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/atoptima/DynamicSparseArrays.jl/blob/v0.7.2/src/matrix.jl#L10-L14">source</a></section><section><div><pre><code class="language-julia hljs">dynamicsparse(Ti, Tj, Tv [; fill_mode = true])</code></pre><p>Creates an empty dynamic sparse matrix with row keys of type <code>Ti</code>, column keys of  type <code>Tj</code>, and non-zero values of type <code>Tv</code>. By default, the matrix is returned in a &quot;fill mode&quot;. This allows the user to fill the matrix with non-zero entries. All the write operations are stored in a <code>Dict</code>. When the matrix is filled, the user must call <code>closefillmode!(matrix)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/atoptima/DynamicSparseArrays.jl/blob/v0.7.2/src/matrix.jl#L21-L30">source</a></section></article><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../api/storage/">« Storage</a><a class="docs-footer-nextpage" href="../qa/">Q&amp;A »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 16 July 2025 13:53">Wednesday 16 July 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
