<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Decomposition paradigms · Coluna.jl</title><meta name="title" content="Decomposition paradigms · Coluna.jl"/><meta property="og:title" content="Decomposition paradigms · Coluna.jl"/><meta property="twitter:title" content="Decomposition paradigms · Coluna.jl"/><meta name="description" content="Documentation for Coluna.jl."/><meta property="og:description" content="Documentation for Coluna.jl."/><meta property="twitter:description" content="Documentation for Coluna.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.048/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.4/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><script src="../../assets/js/init.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Coluna.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs (Ctrl + /)"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Tutorials</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Getting Started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../start/start/">Column generation</a></li><li><a class="tocitem" href="../../start/cuts/">Cut Generation</a></li><li><a class="tocitem" href="../../start/pricing/">Pricing callback</a></li><li><a class="tocitem" href="../../start/identical_sp/">Identical subproblems</a></li><li><a class="tocitem" href="../../start/custom_data/">Custom data</a></li><li><a class="tocitem" href="../../start/initial_columns/">Initial columns callback</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Advanced tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../start/advanced_demo/">Column Generation and Benders on Location Routing</a></li><li><a class="tocitem" href="../../start/other_pbs/">Other classic problems</a></li></ul></li></ul></li><li><span class="tocitem">Manual</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox" checked/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Decomposition</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Decomposition paradigms</a><ul class="internal"><li><a class="tocitem" href="#Dantzig-Wolfe"><span>Dantzig-Wolfe</span></a></li><li><a class="tocitem" href="#Benders"><span>Benders</span></a></li></ul></li><li><a class="tocitem" href="../blockdecomposition/">Setup decomposition using BlockDecomposition</a></li></ul></li><li><a class="tocitem" href="../config/">Configuration</a></li><li><a class="tocitem" href="../algorithm/">Built-in algorithms</a></li><li><a class="tocitem" href="../callbacks/">User-defined Callbacks</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../api/algos/">Algorithms</a></li><li><a class="tocitem" href="../../api/benders/">Benders</a></li><li><a class="tocitem" href="../../api/branching/">Branching</a></li><li><a class="tocitem" href="../../api/colgen/">ColGen</a></li><li><a class="tocitem" href="../../api/treesearch/">TreeSearch</a></li><li><a class="tocitem" href="../../api/storage/">Storage</a></li></ul></li><li><a class="tocitem" href="../../dynamic_sparse_arrays/">Dynamic Sparse Arrays</a></li><li><a class="tocitem" href="../../qa/">Q&amp;A</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><div class="docs-left"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li><a class="is-disabled">Decomposition</a></li><li class="is-active"><a href>Decomposition paradigms</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Decomposition paradigms</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/atoptima/Coluna.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/atoptima/Coluna.jl/blob/master/docs/src/man/decomposition.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Dantzig-Wolfe-and-Benders-decompositions"><a class="docs-heading-anchor" href="#Dantzig-Wolfe-and-Benders-decompositions">Dantzig-Wolfe and Benders decompositions</a><a id="Dantzig-Wolfe-and-Benders-decompositions-1"></a><a class="docs-heading-anchor-permalink" href="#Dantzig-Wolfe-and-Benders-decompositions" title="Permalink"></a></h1><p>Coluna is a framework to optimize mixed-integer programs that you can decompose. In other words, if you remove the linking constraints or linking variables from your program, you&#39;ll get sets of constraints (blocks) that you can solve independently.</p><p>Decompositions are typically used on programs whose constraints or variables can be divided into a set of &quot;easy&quot; constraints (respectively easy variables) and a set of &quot;hard&quot; constraints (respectively hard variables). Decomposing on constraints leads to Dantzig-Wolfe transformation while decomposing on variables leads to the Benders transformation. Both of these decompositions are implemented in Coluna. </p><h2 id="Dantzig-Wolfe"><a class="docs-heading-anchor" href="#Dantzig-Wolfe">Dantzig-Wolfe</a><a id="Dantzig-Wolfe-1"></a><a class="docs-heading-anchor-permalink" href="#Dantzig-Wolfe" title="Permalink"></a></h2><h3 id="Original-formulation"><a class="docs-heading-anchor" href="#Original-formulation">Original formulation</a><a id="Original-formulation-1"></a><a class="docs-heading-anchor-permalink" href="#Original-formulation" title="Permalink"></a></h3><p>Let&#39;s consider the following coefficient matrix that has a block diagonal structure in gray and some linking constraints in blue :</p><p><img src="../../assets/img/dwdec.png" alt="Dantzig-Wolfe decomposition"/></p><p>You penalize the violation of the linking constraints in the objective function. You can then solve the blocks independently.</p><p>The Dantzig-Wolfe reformulation gives rise to a master problem with an exponential number of variables. Coluna dynamically generates these variables by solving the subproblems. It&#39;s the column generation algorithm.</p><p>Let&#39;s consider the following original formulation in which we partition variables into two vectors <span>$x_1$</span> and <span>$x_2$</span> :</p><p class="math-container">\[\begin{aligned}
\min \quad&amp; c_1&#39; x_1 + c_2&#39; x_2 &amp; \\
\text{s.t.} \quad&amp; A_1 x_1 + A_2 x_2 \geq b &amp; (1)\\
&amp; D_1 x_1 \quad \quad \quad   \geq d_1 &amp; (2) \\
&amp; \quad   \quad \quad D_2 x_2 \geq d_2 &amp; (3) \\
\end{aligned}\]</p><ul><li>variables <span>$x_1$</span> and <span>$x_2$</span> are the original variables of the problem (duty: <code>OriginalVar</code>)</li><li>constraints <span>$(1)$</span> are the linking constraints (duty: <code>OriginalConstr</code>)</li><li>constraints <span>$(2)$</span> shapes the first subproblem (duty: <code>OriginalConstr</code>)</li><li>constraints <span>$(3)$</span> shapes the second subproblem (duty: <code>OriginalConstr</code>)</li></ul><h3 id="Master"><a class="docs-heading-anchor" href="#Master">Master</a><a id="Master-1"></a><a class="docs-heading-anchor-permalink" href="#Master" title="Permalink"></a></h3><p>When you apply a Dantzig-Wofe decomposition to this formulation,  Coluna reformulates it into the following master problem :</p><p class="math-container">\[\begin{aligned}
\min \quad&amp; \sum\limits_{q \in Q_1} c_1&#39; \tilde{x_1}^q \lambda_q + \sum\limits_{q \in Q_2} c_2&#39; \tilde{x_2}^q \lambda_q + f&#39;a \\
\text{s.t.} \quad&amp; \sum\limits_{q \in Q_1} A_1 \tilde{x_1}^q \lambda_q + \sum\limits_{q \in Q_2} A_2 \tilde{x_2}^q \lambda_q + a \geq b &amp; (1)\\
&amp; L_1 \leq \sum\limits_{q \in Q_1} \tilde{z}_1\lambda_q \leq U_1 &amp; (2)\\
&amp; L_2 \leq \sum\limits_{q \in Q_2} \tilde{z}_2\lambda_q \leq U_2 &amp; (3)\\
&amp; \lambda_q \geq 0, \quad q \in Q_1 \cup Q_2
\end{aligned}\]</p><p>where:</p><ul><li>set <span>$Q_1$</span> is the index set of the solutions to the first subproblem </li><li>set <span>$Q_2$</span> is the index set of the solutions to the second subproblem</li><li>set of the solutions to the first is <span>$\{\tilde{x}^q_1\}_{q \in Q_1}$</span> (duty: <code>MasterRepPricingVar</code>)</li><li>set of the solutions to the second subproblem is <span>$\{\tilde{x}^q_2\}_{q \in Q_2}$</span> respectively (duty: <code>MasterRepPricingVar</code>)</li><li>constraint <span>$(1)$</span> is the reformulation of the linking constraints (duty: <code>MasterMixedConstr</code>)</li><li>constraint <span>$(2)$</span> is the convexity constraint of the first subproblem and involves the lower <span>$L_1$</span> and upper <span>$U_1$</span> multiplicity of the subproblem (duty: <code>MasterConvexityConstr</code>)</li><li>constraint <span>$(3)$</span> is the convexity constraint of the second subproblem and involves the lower <span>$L_2$</span> and upper <span>$U_2$</span> multiplicity of the subproblem (duty: <code>MasterConvexityConstr</code>)</li><li>variables <span>$\tilde{z}_1$</span> and <span>$\tilde{z}_2$</span> are representative of pricing setup variables in the master (always equal to <span>$1$</span>) (duty: <code>MasterRepPricingVar</code>)</li><li>variables <span>$\lambda_q$</span> are the columns (duty: <code>MasterCol</code>)</li><li>variable <span>$a$</span> is the artificial variable (duty: <code>MasterArtVar</code>)</li></ul><p>At the beginning of the column generation algorithm, the master formulation does not have any master columns. Therefore, the master may be infeasible.  To prevent this, Coluna adds a local artificial variable <span>$a$</span> specific to each constraint of the master and a global artificial variable. Costs <span>$f$</span> of artificial and global artificial variables can be defined in <a href="man/@ref">Coluna.Params</a>.</p><p>Lower and upper multiplicities of subproblems are <span>$1$</span> by default. However, when some subproblems are identical (same coefficient matrix and right-hand side),  you can avoid solving all of them at each iteration by defining only one subproblem and setting its multiplicity to the number of times it appears. See this <a href="../../start/identical_sp/#tuto_identical_sp">tutorial</a> to get an example of Dantzig-Wolfe decomposition with identical subproblems. </p><h3 id="Pricing-Subproblem"><a class="docs-heading-anchor" href="#Pricing-Subproblem">Pricing Subproblem</a><a id="Pricing-Subproblem-1"></a><a class="docs-heading-anchor-permalink" href="#Pricing-Subproblem" title="Permalink"></a></h3><p>Subproblems take the following form (here, it&#39;s the first subproblem):</p><p class="math-container">\[\begin{aligned}
\min \quad&amp; \bar{c_1}&#39; x_1 + z_1\\
\text{s.t.} \quad&amp; D_1x_1 \geq d_1 &amp; (1)\\
&amp; \quad x_1 \geq 0
\end{aligned}\]</p><p>where:</p><ul><li>vector <span>$\bar{c}$</span> is the reduced cost of the subproblem variables computed by the column generation algorithm. </li><li>variables <span>$x_1$</span> are the subproblem variables (duty: <code>DwSpPricingVar</code>)</li><li>constraint <span>$(1)$</span> is the subproblem constraint (duty: <code>DwSpPureConstr</code>)</li><li>variable <span>$z_1$</span> is the pricing setup variable (always equal to <span>$1$</span>) (duty: <code>DwSpSetupVar</code>)</li></ul><h2 id="Benders"><a class="docs-heading-anchor" href="#Benders">Benders</a><a id="Benders-1"></a><a class="docs-heading-anchor-permalink" href="#Benders" title="Permalink"></a></h2><h3 id="Original-formulation-2"><a class="docs-heading-anchor" href="#Original-formulation-2">Original formulation</a><a class="docs-heading-anchor-permalink" href="#Original-formulation-2" title="Permalink"></a></h3><p>Let&#39;s consider the following coefficient matrix that has a block diagonal structure in gray and some linking variables in blue :</p><p><img src="../../assets/img/bdec.png" alt="Benders decomposition"/></p><p>The intuition behind Benders decomposition is that some hard problems can become much easier with some of their variables fixed.  Benders aims to divide the variables of the problem into two &quot;levels&quot;: the 1st level variables which, once fixed, make it easier to find a solution for the remaining variables, the so-called 2nd-level variables.</p><p>The question is how to set the 1st level variables. Benders&#39; theory proceeds by the successive generation of cuts: given a 1st-level solution, we ask the following questions:</p><ul><li>Is the subproblem infeasible? If so, then the 1st-level solution is not correct and must be eliminated. A feasibility cut will be derived from the dual subproblem and added to the master.</li><li>Does the aggregation of the master and subproblem solutions give rise to an optimal solution to the problem? It depends on a criterion that can be computed. If it is the case, we are done, else, we derive an optimality cut from the dual subproblem and add it into the master.</li></ul><p>Formally, given an original MIP:</p><p class="math-container">\[\begin{aligned}
\min \quad&amp; cx + fy &amp; \\
\text{s.t.} \quad&amp; Ax \geq a &amp; (2) \\
&amp; Ey \geq e                  &amp; (3) \\
&amp; Bx + Dy \geq d             &amp; (4)\\
&amp; x, y \geq 0, ~ x \in \mathbb{Z}^n\\
\end{aligned}\]</p><p>where:</p><ul><li>variables <span>$x$</span> are the 1st-level variables (duty: <code>OriginalVar</code>)</li><li>variables <span>$y$</span> are the 2nd-level variables (duty: <code>OriginalVar</code>)</li><li>constraints (2) are the 1st-level constraints (duty: <code>OriginalConstr</code>)</li><li>constraints (3) are the 2nd-level constraints (duty: <code>OriginalConstr</code>)</li><li>constraints (4) are the linking constraints (duty: <code>OriginalConstr</code>)</li></ul><h3 id="Master-2"><a class="docs-heading-anchor" href="#Master-2">Master</a><a class="docs-heading-anchor-permalink" href="#Master-2" title="Permalink"></a></h3><p>When you apply a Benders decomposition to this formulation,  Coluna reformulates it into the following master problem :</p><p class="math-container">\[\begin{aligned}
\min \quad&amp; cx + \sum\limits_{k \in K}\eta_k &amp; \\
\text{s.t.} \quad&amp; Ax \geq a &amp; (5)\\
&amp; &lt;~\text{benders cuts}~&gt; &amp; (6) \\
&amp; \eta_k \in \mathbb{R} \quad \forall k \in K\\
\end{aligned}\]</p><p>where:</p><ul><li>variables <span>$x$</span> are the 1st-level variables (duty: <code>MasterBendFirstStageVar</code>)</li><li>variables <span>$\eta$</span> are the second stage cost variables (duty: <code>MasterBendSecondStageCostVar</code>)</li><li>constraints (5) are the first-level constraints (duty: <code>MasterPureConstr</code>)</li><li>constraints (6) are the benders cuts (duty: ``)</li></ul><p>Note that the <span>$\eta$</span> variables are free.</p><h3 id="Separation-subproblem"><a class="docs-heading-anchor" href="#Separation-subproblem">Separation subproblem</a><a id="Separation-subproblem-1"></a><a class="docs-heading-anchor-permalink" href="#Separation-subproblem" title="Permalink"></a></h3><p>Here is the form of a given separation subproblem:</p><p class="math-container">\[\begin{aligned}
\min \quad&amp; fy &amp; \\
\text{s.t.} \quad&amp; Dy \geq d - B\bar{x} &amp; (7) \\
&amp; Ey \geq e &amp; (8) \\
&amp; y \geq 0 \\
\end{aligned}\]</p><p>where:</p><ul><li>variables <span>$y$</span> are the 2nd-level variables (duty: <code>BendSpSepVar</code>)</li><li>values <span>$\bar{x}$</span> are a solution to the master problem </li><li>constraints (7) are the linking constraints with the 1st-level variables fixed to <span>$\bar{x}$</span> (duty: <code>BendSpTechnologicalConstr</code>)</li><li>constraints (8) are the 2nd-level constraints (duty: <code>BendSpPureConstr</code>)</li></ul><p>Note that in the special case where the master problem is unbounded, the shape of the subproblem is slightly modified. See the <a href="../../api/benders/#api_benders">API</a> section to get more information.</p><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../start/other_pbs/">« Other classic problems</a><a class="docs-footer-nextpage" href="../blockdecomposition/">Setup decomposition using BlockDecomposition »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.28.0-DEV on <span class="colophon-date" title="Friday 4 August 2023 12:19">Friday 4 August 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
